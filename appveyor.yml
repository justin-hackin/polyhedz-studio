image: Visual Studio 2017
environment:
  nodejs_version: "14"

platform:
  - x64

cache:
  - node_modules
  - '%USERPROFILE%\.electron'
  - $(yarn global bin)
  - $(yarn global dir)

init:
  - git config --global core.autocrlf input

install:
  - ps: Install-Product node $env:nodejs_version
  - vcpkg install gsl:x64-windows
  - vcpkg install double-conversion:x64-windows
  - vcpkg install cairo:x64-windows
  # https://www.appveyor.com/docs/windows-images-software/#boost
  - yarn config set cmake_BOOST_ROOT C:\Libraries\boost_1_69_0
  - ps: $env:Path += ";$(yarn global bin)"
  - yarn global add cmake-js
  - yarn

build_script:
  - yarn release --win

test: false
